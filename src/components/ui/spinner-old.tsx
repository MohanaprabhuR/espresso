"use client";
import * as React from "react";
import { cn } from "@/lib/utils";

interface SpinnerProps extends React.HTMLAttributes<HTMLDivElement> {
  size?: "sm" | "md" | "lg" | "xl";
  track?: boolean;
  variant?: "gray" | "blue" | "red" | "green" | "amber";
}

export function Spinner({
  size = "sm",
  track = false,
  variant = "gray",
  className,
  ...props
}: SpinnerProps) {
  // Tailwind container + SVG sizes
  const sizes = {
    sm: { container: "h-3 w-3", svg: 12 },
    md: { container: "h-3.5 w-3.5", svg: 14 },
    lg: { container: "h-4 w-4", svg: 16 },
    xl: { container: "h-5 w-5", svg: 20 },
  };

  const { container, svg } = sizes[size];

  // Gradients for light + dark mode
  const gradients: Record<string, { light: string; dark: string }> = {
    gray: {
      light: "var(--spinner-gray)",
      dark: track ? "var(--spinner-dark-common)" : "var(--spinner-gray)",
    },
    blue: {
      light: "var(--spinner-blue)",
      dark: track ? "var(--spinner-dark-common)" : "var(--spinner-blue)",
    },
    green: {
      light: "var(--spinner-green)",
      dark: track ? "var(--spinner-dark-common)" : "var(--spinner-green)",
    },
    amber: {
      light: "var(--spinner-amber)",
      dark: track ? "var(--spinner-dark-common)" : "var(--spinner-amber)",
    },
    red: {
      light: "var(--spinner-red)",
      dark: track ? "var(--spinner-dark-common)" : "var(--spinner-red)",
    },
  };

  const trackColors = {
    gray: "var(--color-spinner-gray)",
    blue: "var(--color-spinner-blue)",
    green: "var(--color-spinner-green)",
    amber: "var(--color-spinner-amber)",
    red: "var(--color-spinner-red)",
  };
  return (
    <div
      className={cn(
        "relative inline-flex items-center justify-center",
        container,
        className
      )}
      {...props}
    >
      {track && (
        <>
          {/* Light mode */}
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width={svg}
            height={svg}
            viewBox="0 0 12 12"
            fill="none"
          >
            <circle
              cx="6"
              cy="6"
              r="4.5"
              stroke={trackColors[variant]}
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
        </>
      )}

      {/* Light mode spinner */}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width={svg}
        height={svg}
        viewBox="0 0 12 12"
        fill="none"
        className="absolute inset-0 animate-spin block dark:hidden"
      >
        <g
          clipPath="url(#paint0_angular_1246_2808_clip_path)"
          data-figma-skip-parse="true"
        >
          <g transform="matrix(0.0054 -0.0009 0.0009 0.0054 6 6)">
            <foreignObject
              x="-1261.26"
              y="-1261.26"
              width="2522.52"
              height="2522.52"
            >
              <div
                style={{
                  background: gradients[variant].light,
                  height: "100%",
                  width: "100%",
                  opacity: 1,
                }}
              ></div>
            </foreignObject>
          </g>
        </g>
        <path
          d="M11.25 6C11.25 5.58579 10.9142 5.25 10.5 5.25C10.0858 5.25 9.75 5.58579 9.75 6L10.5 6L11.25 6ZM8.25 9.89711L8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75L6 10.5ZM2.10289 8.25L1.45337 8.625L2.10289 8.25ZM1.5 6L0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125L2.10289 3.75ZM4.125 2.7524C4.48372 2.5453 4.60663 2.0866 4.39952 1.72789C4.19241 1.36917 3.73372 1.24626 3.375 1.45337L3.75 2.10289L4.125 2.7524ZM10.5 6L9.75 6C9.75 6.65826 9.57673 7.30493 9.24759 7.875L9.89711 8.25L10.5466 8.625C11.0074 7.8269 11.25 6.92157 11.25 6L10.5 6ZM9.89711 8.25L9.24759 7.875C8.91846 8.44507 8.44507 8.91846 7.875 9.2476L8.25 9.89711L8.625 10.5466C9.4231 10.0858 10.0858 9.4231 10.5466 8.625L9.89711 8.25ZM8.25 9.89711L7.875 9.2476C7.30493 9.57673 6.65826 9.75 6 9.75L6 10.5L6 11.25C6.92157 11.25 7.8269 11.0074 8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75C5.34174 9.75 4.69507 9.57673 4.125 9.24759L3.75 9.89711L3.375 10.5466C4.1731 11.0074 5.07843 11.25 6 11.25L6 10.5ZM3.75 9.89711L4.125 9.24759C3.55493 8.91846 3.08154 8.44507 2.7524 7.875L2.10289 8.25L1.45337 8.625C1.91415 9.4231 2.5769 10.0858 3.375 10.5466L3.75 9.89711ZM2.10289 8.25L2.7524 7.875C2.42327 7.30493 2.25 6.65826 2.25 6L1.5 6L0.75 6C0.75 6.92157 0.992582 7.8269 1.45337 8.625L2.10289 8.25ZM1.5 6L2.25 6C2.25 5.34174 2.42327 4.69507 2.7524 4.125L2.10289 3.75L1.45337 3.375C0.992583 4.1731 0.75 5.07843 0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125C3.08154 3.55493 3.55493 3.08154 4.125 2.7524L3.75 2.10289L3.375 1.45337C2.5769 1.91415 1.91415 2.5769 1.45337 3.375L2.10289 3.75Z"
          data-figma-gradient-fill='{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":0.21960784494876862,"g":0.21960784494876862,"b":0.21960784494876862,"a":1.0},"position":0.72380936145782471},{"color":{"r":0.21960784494876862,"g":0.21960784494876862,"b":0.21960784494876862,"a":0.0},"position":0.99868124723434448}],"stopsVar":[],"transform":{"m00":10.800000190734863,"m01":1.7999994754791260,"m02":-0.30000025033950806,"m10":-1.7999994754791260,"m11":10.800000190734863,"m12":1.4999995231628418},"opacity":1.0,"blendMode":"NORMAL","visible":true}'
        />
        <defs>
          <clipPath id="paint0_angular_1246_2808_clip_path">
            <path d="M11.25 6C11.25 5.58579 10.9142 5.25 10.5 5.25C10.0858 5.25 9.75 5.58579 9.75 6L10.5 6L11.25 6ZM8.25 9.89711L8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75L6 10.5ZM2.10289 8.25L1.45337 8.625L2.10289 8.25ZM1.5 6L0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125L2.10289 3.75ZM4.125 2.7524C4.48372 2.5453 4.60663 2.0866 4.39952 1.72789C4.19241 1.36917 3.73372 1.24626 3.375 1.45337L3.75 2.10289L4.125 2.7524ZM10.5 6L9.75 6C9.75 6.65826 9.57673 7.30493 9.24759 7.875L9.89711 8.25L10.5466 8.625C11.0074 7.8269 11.25 6.92157 11.25 6L10.5 6ZM9.89711 8.25L9.24759 7.875C8.91846 8.44507 8.44507 8.91846 7.875 9.2476L8.25 9.89711L8.625 10.5466C9.4231 10.0858 10.0858 9.4231 10.5466 8.625L9.89711 8.25ZM8.25 9.89711L7.875 9.2476C7.30493 9.57673 6.65826 9.75 6 9.75L6 10.5L6 11.25C6.92157 11.25 7.8269 11.0074 8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75C5.34174 9.75 4.69507 9.57673 4.125 9.24759L3.75 9.89711L3.375 10.5466C4.1731 11.0074 5.07843 11.25 6 11.25L6 10.5ZM3.75 9.89711L4.125 9.24759C3.55493 8.91846 3.08154 8.44507 2.7524 7.875L2.10289 8.25L1.45337 8.625C1.91415 9.4231 2.5769 10.0858 3.375 10.5466L3.75 9.89711ZM2.10289 8.25L2.7524 7.875C2.42327 7.30493 2.25 6.65826 2.25 6L1.5 6L0.75 6C0.75 6.92157 0.992582 7.8269 1.45337 8.625L2.10289 8.25ZM1.5 6L2.25 6C2.25 5.34174 2.42327 4.69507 2.7524 4.125L2.10289 3.75L1.45337 3.375C0.992583 4.1731 0.75 5.07843 0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125C3.08154 3.55493 3.55493 3.08154 4.125 2.7524L3.75 2.10289L3.375 1.45337C2.5769 1.91415 1.91415 2.5769 1.45337 3.375L2.10289 3.75Z" />
          </clipPath>
        </defs>
      </svg>
      {/* Dark mode spinner */}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width={svg}
        height={svg}
        viewBox="0 0 12 12"
        fill="none"
        className="absolute inset-0 animate-spin hidden dark:block"
      >
        <g
          clipPath="url(#paint0_angular_1250_3176_clip_path)"
          data-figma-skip-parse="true"
        >
          <g transform="matrix(0.0054 -0.0009 0.0009 0.0054 6 6)">
            <foreignObject
              x="-1261.26"
              y="-1261.26"
              width="2522.52"
              height="2522.52"
            >
              <div
                style={{
                  background: gradients[variant].dark,
                  height: "100%",
                  width: "100%",
                  opacity: 1,
                }}
              />
            </foreignObject>
          </g>
        </g>
        <path
          d="M11.25 6C11.25 5.58579 10.9142 5.25 10.5 5.25C10.0858 5.25 9.75 5.58579 9.75 6L10.5 6L11.25 6ZM8.25 9.89711L8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75L6 10.5ZM2.10289 8.25L1.45337 8.625L2.10289 8.25ZM1.5 6L0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125L2.10289 3.75ZM4.125 2.7524C4.48372 2.5453 4.60663 2.0866 4.39952 1.72789C4.19241 1.36917 3.73372 1.24626 3.375 1.45337L3.75 2.10289L4.125 2.7524ZM10.5 6L9.75 6C9.75 6.65826 9.57673 7.30493 9.24759 7.875L9.89711 8.25L10.5466 8.625C11.0074 7.8269 11.25 6.92157 11.25 6L10.5 6ZM9.89711 8.25L9.24759 7.875C8.91846 8.44507 8.44507 8.91846 7.875 9.2476L8.25 9.89711L8.625 10.5466C9.4231 10.0858 10.0858 9.4231 10.5466 8.625L9.89711 8.25ZM8.25 9.89711L7.875 9.2476C7.30493 9.57673 6.65826 9.75 6 9.75L6 10.5L6 11.25C6.92157 11.25 7.8269 11.0074 8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75C5.34174 9.75 4.69507 9.57673 4.125 9.24759L3.75 9.89711L3.375 10.5466C4.1731 11.0074 5.07843 11.25 6 11.25L6 10.5ZM3.75 9.89711L4.125 9.24759C3.55493 8.91846 3.08154 8.44507 2.7524 7.875L2.10289 8.25L1.45337 8.625C1.91415 9.4231 2.5769 10.0858 3.375 10.5466L3.75 9.89711ZM2.10289 8.25L2.7524 7.875C2.42327 7.30493 2.25 6.65826 2.25 6L1.5 6L0.75 6C0.75 6.92157 0.992582 7.8269 1.45337 8.625L2.10289 8.25ZM1.5 6L2.25 6C2.25 5.34174 2.42327 4.69507 2.7524 4.125L2.10289 3.75L1.45337 3.375C0.992583 4.1731 0.75 5.07843 0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125C3.08154 3.55493 3.55493 3.08154 4.125 2.7524L3.75 2.10289L3.375 1.45337C2.5769 1.91415 1.91415 2.5769 1.45337 3.375L2.10289 3.75Z"
          data-figma-gradient-fill='{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":1.0,"g":1.0,"b":1.0,"a":1.0},"position":0.72380936145782471},{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.0},"position":0.99868124723434448}],"stopsVar":[],"transform":{"m00":10.800000190734863,"m01":1.7999994754791260,"m02":-0.30000025033950806,"m10":-1.7999994754791260,"m11":10.800000190734863,"m12":1.4999995231628418},"opacity":1.0,"blendMode":"NORMAL","visible":true}'
        />
        <defs>
          <clipPath id="paint0_angular_1250_3176_clip_path">
            <path d="M11.25 6C11.25 5.58579 10.9142 5.25 10.5 5.25C10.0858 5.25 9.75 5.58579 9.75 6L10.5 6L11.25 6ZM8.25 9.89711L8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75L6 10.5ZM2.10289 8.25L1.45337 8.625L2.10289 8.25ZM1.5 6L0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125L2.10289 3.75ZM4.125 2.7524C4.48372 2.5453 4.60663 2.0866 4.39952 1.72789C4.19241 1.36917 3.73372 1.24626 3.375 1.45337L3.75 2.10289L4.125 2.7524ZM10.5 6L9.75 6C9.75 6.65826 9.57673 7.30493 9.24759 7.875L9.89711 8.25L10.5466 8.625C11.0074 7.8269 11.25 6.92157 11.25 6L10.5 6ZM9.89711 8.25L9.24759 7.875C8.91846 8.44507 8.44507 8.91846 7.875 9.2476L8.25 9.89711L8.625 10.5466C9.4231 10.0858 10.0858 9.4231 10.5466 8.625L9.89711 8.25ZM8.25 9.89711L7.875 9.2476C7.30493 9.57673 6.65826 9.75 6 9.75L6 10.5L6 11.25C6.92157 11.25 7.8269 11.0074 8.625 10.5466L8.25 9.89711ZM6 10.5L6 9.75C5.34174 9.75 4.69507 9.57673 4.125 9.24759L3.75 9.89711L3.375 10.5466C4.1731 11.0074 5.07843 11.25 6 11.25L6 10.5ZM3.75 9.89711L4.125 9.24759C3.55493 8.91846 3.08154 8.44507 2.7524 7.875L2.10289 8.25L1.45337 8.625C1.91415 9.4231 2.5769 10.0858 3.375 10.5466L3.75 9.89711ZM2.10289 8.25L2.7524 7.875C2.42327 7.30493 2.25 6.65826 2.25 6L1.5 6L0.75 6C0.75 6.92157 0.992582 7.8269 1.45337 8.625L2.10289 8.25ZM1.5 6L2.25 6C2.25 5.34174 2.42327 4.69507 2.7524 4.125L2.10289 3.75L1.45337 3.375C0.992583 4.1731 0.75 5.07843 0.75 6L1.5 6ZM2.10289 3.75L2.7524 4.125C3.08154 3.55493 3.55493 3.08154 4.125 2.7524L3.75 2.10289L3.375 1.45337C2.5769 1.91415 1.91415 2.5769 1.45337 3.375L2.10289 3.75Z" />
          </clipPath>
        </defs>
      </svg>
    </div>
  );
}
